<!DOCTYPE html>
<html lang="pt_BR>
<head>
    <title>Wagner Marcuci Software C/C++</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
</head>
<body style="background-color:black; color:white;" alink="white" link="white" vlink="white">
<h2 style="border: 1px solid white;width:250px;padding:5px;">&nbsp;&nbsp;Controlar Console</h2>
<br/>
<a href="https://youtu.be/ssUc3rnUK9U" 
style="font-family:Candara;text-decoration:none;color:red;">V&iacute;deo do Canal</a>
</br></br>
<pre>
#include &lt;stdio.h&gt;
#include &lt;windows.h&gt;

int main(int argc, char* argv[])
{
    if (argc == 2)
    {
        unsigned pid = 0;

        printf( "\n\nargv: %s\n", argv[ 1 ] );

        int rc = sscanf_s(argv[1], "%u", &pid) ;

        printf( "sscanf_s: %d pid: %d\n", rc, pid  );

        if ( rc == 1)
        {
            printf( "attachado.\n" );

            FreeConsole();

            if ( AttachConsole( pid ) )
            {
                // Desabilitar Ctrl-C neste console
                SetConsoleCtrlHandler(NULL, TRUE);
                GenerateConsoleCtrlEvent(CTRL_C_EVENT, 0);
                printf( "attach...\n" );
                printf( "vou executar o notepad daqui.\n" );
                system( "notepad" );
                return 0;
            }
            else
            {
                printf( "erro...\n" );
            }
        }

        printf( "saiu, informe o pid.\n" );
    }

    return 1;
}
</pre>
</body>
</html>
